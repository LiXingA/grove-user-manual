{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Histogram\n\nUnemployment rate by county, August 2016. Source: [Bureau of Labor Statistics](http://www.bls.gov/lau/#tables).`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"d3 = require(\"d3@^6.2.0\")","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"margin = ({top: 20, right: 20, bottom: 30, left: 40})","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"bins = d3.bin().thresholds(40)(data)","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"x = d3.scaleLinear()\n    .domain([bins[0].x0, bins[bins.length - 1].x1])\n    .range([margin.left, width - margin.right])","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"y = d3.scaleLinear()\n    .domain([0, d3.max(bins, d => d.length)]).nice()\n    .range([height - margin.bottom, margin.top])","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"height = 500","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"chart = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height]);\n  \n  svg.append(\"g\")\n      .attr(\"fill\", \"steelblue\")\n    .selectAll(\"rect\")\n    .data(bins)\n    .join(\"rect\")\n      .attr(\"x\", d => x(d.x0) + 1)\n      .attr(\"width\", d => Math.max(0, x(d.x1) - x(d.x0) - 1))\n      .attr(\"y\", d => y(d.length))\n      .attr(\"height\", d => y(0) - y(d.length));\n\n  svg.append(\"g\")\n      .call(xAxis);\n  \n  svg.append(\"g\")\n      .call(yAxis);\n  \n  return svg.node();\n}","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"data = Object.assign(d3.csvParse(await FileAttachment(\"#d3/unemployment-x.csv\").text(), ({rate}) => +rate), {x: \"Unemployment (%)\", y: \"Counties\"})","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"xAxis = g => g\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(d3.axisBottom(x).ticks(width / 80 ).tickSizeOuter(0))\n    .call(g => g.append(\"text\")\n        .attr(\"x\", width - margin.right)\n        .attr(\"y\", -4)\n        .attr(\"fill\", \"currentColor\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"text-anchor\", \"end\")\n        .text(data.x))","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"yAxis = g => g\n    .attr(\"transform\", `translate(${margin.left},0)`)\n    .call(d3.axisLeft(y).ticks(height / 40))\n    .call(g => g.select(\".domain\").remove())\n    .call(g => g.select(\".tick:last-of-type text\").clone()\n        .attr(\"x\", 4)\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"font-weight\", \"bold\")\n        .text(data.y))","pinCode":true}}}],"version":"2.19.1"}