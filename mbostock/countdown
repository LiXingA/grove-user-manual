{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"d3 = require(\"d3-time@2\")","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"now = {\n  while (true) {\n    const date = new Date(Math.ceil((Date.now() + 1) / 1000) * 1000);\n    yield Promises.when(date, date);\n  }\n}","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"then = new Date(Date.UTC(2021, 0, 20, 17))","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"function formatInterval(interval) {\n  let format = [];\n  for (const key in interval) {\n    if (interval[key] === 1) {\n      format.push(`${interval[key]} ${key.slice(0, -1)}`);\n    } else if (format.length || interval[key] > 1) {\n      format.push(`${interval[key]} ${key}`);\n    }\n  }\n  if (format.length > 1) {\n    format[format.length - 1] = `and ${format[format.length - 1]}`;\n  }\n  return format.join(\",\\n\");\n}","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"function interval(then, now) {\n  if (then <= now) throw new Error(\"Timeâ€™s up!\");\n  let t = now;\n  let years = d3.timeYear.count(now, then);\n  if ((t = d3.timeYear.offset(t, years)) > then) t = d3.timeYear.offset(t, -1), --years;\n  let months = d3.timeMonth.count(t, then);\n  if ((t = d3.timeMonth.offset(t, months)) > then) t = d3.timeMonth.offset(t, -1), --months;\n  let days = d3.timeDay.count(t, then);\n  if ((t = d3.timeDay.offset(t, days)) > then) t = d3.timeDay.offset(t, -1), --days;\n  let hours = d3.timeHour.count(t, then);\n  if ((t = d3.timeHour.offset(t, hours)) > then) t = d3.timeHour.offset(t, -1), --hours;\n  let minutes = d3.timeMinute.count(t, then);\n  if ((t = d3.timeMinute.offset(t, minutes)) > then) t = d3.timeMinute.offset(t, -1), --minutes;\n  let seconds = d3.timeSecond.count(t, then);\n  if ((t = d3.timeSecond.offset(t, seconds)) > then) t = d3.timeSecond.offset(t, -1), --seconds;\n  return {years, months, days, hours, minutes, seconds};\n}","pinCode":true}}},{"type":"codeTool","data":{"codeData":{"value":"html`<h1 style=\"display:none;\">Countdown</h1>\n\n<h1 style=\"white-space: pre-wrap;\">${document.createTextNode(formatInterval(interval(then, now)))}</h1>`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"md`This notebook counts down the time until January 20, 2021, noon ET, when the next president of the United States is inaugurated.`","pinCode":false}}}],"version":"2.19.1"}